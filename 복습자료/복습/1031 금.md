# 1031 금

## 산점도 그리기

- 좌표명면상 관측값들을 점을 찍어 표시하는 그래프
- 변수간의 **상관관계**나 군집 분류 확인 가능
- scatter() 메소드 사용

</br>

<code>
<pre>

plt.scatter(x, y, alpha=0.10)
#alpha:1에 가까울 수록 진해진다
#진할 수록 군집도가 높다

plt.xlabel("가격")  #x 라벨 이름
plt.ylabel("캐럿")  #y 라벨 이름

plt.show()          #표 그리기

df[['price', 'carat']].corr()
#상관계수 계산

</pre>
</code>

</br>

>상관계수

-두 변수간의 상관관계를 정량적으로 계산한 값
- -1 ~ 1 사이의 값이 존재한다
- 양의 상관관계 : 0 ~ 1 (비례)
- 음의 상관관계 : -1 ~ 0 (반비례)
- 절대값 기준으로 1로 갈수록 상관관계가 강함.


</br>
</br>
</br>


## 막대그래프 그리기

>수량/값의 크기를 비교하기 위해 막대 형식으로 나타낸 그래프


<code>
<pre>

plt.bar(df.index, df[2009])
plt.plot(df.index, df[2009], color='red') # 선그래프: 변화 흐름(추세)
plt.title("2009년 계절별 강수량 비교")    # 막대그래프: 단순 수량적 비교
#막대의 값들을 출력

for x, y in enumerate(df[2009]):
    plt.text(x-0.1, y+5, str(y))
plt.ylim(0, 900)
#그래프 크기가 700이 넘으니
#ylim으로 900크기까지 하여 보기 쉽게 만듬

plt.text(1, 200, "안녕") 
#text(x위치, y위치, str): (x, y) 위치에 str을 쓴다.
#막대 그래프 바로 위에 text가 써짐

plt.show()

</pre>
</code>

</br>
</br>
</br>

## 파이차트

>pie(x, labels)
- x값 : 값들을 100 기준으로 비율을 계산하여 크기 설정
- labels : 값들의 label
- autopct : 조각 내 표시될 문자열 형식
- explode : labels 인덱스에 따라 값이 높을 수록 따로 떼어짐
- shadow : True 시 차트에 그림자 생김

</br>

>autopct = '%.2%%'
- %f : 실수
- %d : 정수
- %% : %

</br>
</br>



<code>
<pre>
!uv pip install xlrd
pd.options.display.max_columns = 22
#최대 칼럼 개수를 22개까지 보여줌

#date 를 string으로 읽기
df = pd.read_excel(
    "data/webbrowser_share.xls", 
    dtype={"date": str},  #  {"컬럼명": 타입} -> 컬럼을 어떤 타입으로 읽을지 지정.
    index_col="date"
)
df.shape

#date 컬럼을 datetime 타입으로 읽어 오기.
df2 = pd.read_excel(
    "data/webbrowser_share.xls", 
    parse_dates=['date'], # 날짜 타입 컬럼 지정
    date_format='%Y.%m',  # 컬럼 값의 형식 지정.
    index_col="date"
)

web_df = df[df.columns[:6]].copy()
#6번째 컬럼부터 비율이 너무 작아서 자름

web_df['기타'] = df[df.columns[6:]].sum(axis=1)
#6번째 컬럼부터 끝까지 기타로 묶음

plt.pie(web_df.iloc[0], 
         labels=web_df.columns, 
         autopct="%d%%",   
         explode=[0.1, 0, 0, 0, 0, 0, 0], shadow=True)
plt.title("2018년 1월 브라우져 점유율")
plt.show()

</pre>
</code>


</br>
</br>
</br>


## 히스토그램 그리기

>연속형 자료를 도수 분포표를 그래프로 나타낸 것
- 도수분포표 : 특정 구간(bin)으로 나눠 그 빈도를 나타낸 표
- x축 : 계급(변수구간)의 대표값
- y축 : 빈도수

</br>

>plt.hist(data[, bins=계급개수])

</br>


<code>
<pre>

tips = pd.read_csv("data/tips.csv")
#csv파일 불러오기

tips['tip'].value_counts()
#연속형 자료라서 의미가 없음

plt.hist(
    tips['tip'], 
    bins=10,        #pd.cut과 동일, 알아서 10개로 분류해
    edgecolor="white"
)

plt.hist(tips['total_bill'], bins=[3, 10, 20, 40, 50, 60], edgecolor="w")
#bins를 리스트로 나눌 수 있음


# smoker 여부 별 total_bill의 분포.
y_total = tips.query("smoker=='Yes'")['total_bill']
#흡연자의 total_bill
n_total = tips.query("smoker=='No'")['total_bill']
#비흡연자의 total_bill

plt.hist(y_total, bins=10, label="yes", alpha=0.5)
#흡연자 분포도를 10개로 나누고 불투명도는 0.5

plt.hist(n_total, bins=10, label='no', alpha=0.5)
#비흡연자 분포도를 10개로 나누고 불투명도는 0.5

plt.xlabel("total bill")
plt.ylabel("수량")
plt.legend()
plt.show()

</pre>
</code>


</br>
</br>
</br>

## 상자 그래프(Boxplot) 그리기

>데이터의 4분위수를 기반으로 연속형 변수의 분포를 요약하고 이상치를 시각적으로 표현함

</br>

<code>
<pre>



</pre>
</code>



</br>
</br>
</br>



## Pandas 시각화
>Series, DataFrame에 plot(), plot accessor를 사용한다.

</br>
</br>

## plot()

>kind 매개변수에 지정한 값에 따라 다양한 그래프를 그릴 수 있음

- line: line plot (default)
- bar:  vertical bar plot
- barh: horizontal bar plot
- hist: histogram
- box:  boxplot
- kde:  Kernel Density Estimation plot
- pie:  pie plot
- scatter: scatter plot


</br>
</br>

## 막대그래프

<code>
<pre>
import pandas as pd
import matplotlib.pyplot as plt

tips = pd.read_csv('data/tips.csv')
#모듈 호출 및 파일 불러오기


tips['sex'].value_counts()
#index가 x축이 되고, value가 y축이 됌

#성별 고객수
v = tips['sex'].value_counts()
v.plot(kind='bar', rot=0) #rot:label 각도 설정 default값은 90도이다

#pandas는 내부적으로 matplotlib 사용해서 그래프를 그린다.
#그래서 추가 설정은 plot()의 파라미터로 전달  또는 matplotlib의 함수 사용할 수있다.
plt.title("성별 고객수")
plt.ylabel("수량")
plt.show()

</pre>
</code>



</br>
</br>
</br>



<code>
<pre>
result = tips.pivot_table(index="sex", columns="smoker", values="total_bill", aggfunc="count")

result.plot(kind='bar')
plt.show()
</pre>
</code>
